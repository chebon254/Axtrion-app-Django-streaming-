<!-- livestream/livestream.html -->
<!DOCTYPE html>
<html>
<head>
    <title>{{ room_name }} Livestream</title>
</head>
<body>
    <h1>{{ room_name }} Livestream</h1>

    <div id="livestream-container">
        <div id="video-container">
            <!-- Add video player here -->
        </div>
        <div id="gifts-container"></div>
        <div id="activity-container">
            <div id="comments"></div>
            <div id="likes"></div>
            <div id="gifts"></div>
        </div>
        <div id="chat-container">
            <div id="messages"></div>
            <input type="text" id="message-input" autocomplete="off" placeholder="Type your message...">
            <button id="send-button">Send</button>
        </div>
    </div>

    <script>
        const roomName = "{{ room_name }}";
        const chatSocket = new WebSocket(`ws://${window.location.host}/ws/livestream/${roomName}/`);

        chatSocket.onmessage = function (event) {
            const data = JSON.parse(event.data);
            const message = data.message;
            const messageType = data.type;

            switch (messageType) {
                case 'comment':
                    displayComment(message);
                    break;
                // Handle other message types (likes, gifts) similarly
                // gift
                case 'gift':
                displayGift(message);
                break;
            }

            // Handle incoming messages, e.g., display in the chat container
            const messagesContainer = document.getElementById('messages');
            messagesContainer.innerHTML += `<div>${message}</div>`;
        };

        document.getElementById('send-button').onclick = function () {
            const messageInput = document.getElementById('message-input');
            const message = messageInput.value;
            // Send the message to the WebSocket
            chatSocket.send(JSON.stringify({ 'message': message, 'type': 'comment' }));
            // Clear the input field
            messageInput.value = '';
        };

        // Add functions to display comments, likes, and gifts
        function displayComment(comment) {
            const commentsContainer = document.getElementById('comments');
            commentsContainer.innerHTML += `<div>${comment}</div>`;
        }

        // Similar functions for likes and gifts
        function displayGift(gift) {
            const giftsContainer = document.getElementById('gifts-container');
            // Assuming gift is a path to a GIF file
            giftsContainer.innerHTML += `<img src="${gift}" alt="Gift" />`;
        }
        // Similar functions for likes and other animations
    </script>
</body>
</html>
